---
title: "FPCC2 Lab1 Parte 4 - Andreza Raquel"
output:
  html_document:
    df_print: paged
---

    Página para análise de dados vindos do TravisTorrent.




```{r setup, warning=FALSE, message=FALSE}
library(tidyverse)
library(here)
library(knitr)
library(ggplot2)
theme_set(theme_bw())
```

## Lendo e limpando os dados de projetos

    Lendo os projetos coletados e formatados por Nazareno. 

```{r read}
projetos = read_csv(here::here("data/projetos.csv"))
```

    Analisando os dados para buscar anormalidades.
    O filtro abaixo retornou um projeto com tamanho de time é igual a 0, e isso é muito estranho. Então, por enquanto, vamos tirá-lo da lista de projetos para ele não atrapalhar os resultados.
    Vale salientar que a variável team é a mediana dos tamanhos de time que o projeto teve durante toda sua existência.

```{r}

estranho <- projetos %>%
  filter(team < 1)

estranho

```

Para isso, usamos a função de filtro para deixar de fora os projetos da linguagem javascript - são poucos projetos com essa linguagem - e com tamanho de time < 1.
    
```{r}
projetos = projetos %>% 
    filter(lang != "javascript", team >= 1)
 
```

## Critérios
    Há uma visão geral das variáveis que são usadas para responder as perguntas que nos permita conhecer sua distribuição e valores extremos?
  
    Este critério está vinculado ao resultado de aprendizado As perguntas estão relacionadas com os conceitos que discutimos de análise descritiva e exploratória? (perguntas que são respondidas por "quantos eventos X existem" não são adequadas, conforme discutido em sala)
  
    Os métodos visuais e matemáticos usados para responder as perguntas são adequados e suficientes?
    Adicione um comentário mencionando o que você achou melhor nos métodos e técnicas usadas, e sugerindo ao menos uma melhoria na resposta de alguma     das questões. Pode sugerir mais caso queira.

    Há conclusões/discussões a partir da resposta das perguntas que lhe são convincente?
    
## Qual a relação entre o tamanho do time e a quantidade de commits mensal em cada projeto?

    Aqui vamos analisar relação entre as variáveis team - que é o tamanho do time do projeto, então a faixa de valores é numérica - e commits_per_month - sendo o número de commits realizados por mês em cada projeto, ou seja, o número de commits total dividido pelo tempo de atividade do projeto, então os valores também são numéricos. O tamanho do time é medido levando em consideração a quantidade de pessoas que fez commit nos últimos três meses no projeto. 

```{r}
projetos %>%
    ggplot(aes(x = team, y = commits_per_month)) +
    geom_point() +
    geom_jitter(alpha = .3, size = 2, color = "darkcyan") +
    ggtitle("Correlação entre o nº de commits/mês e o nº de pessoas no projeto") +
    xlab("Quantidade de pessoas no projeto") +
    ylab("Número de commits por mês") +
    theme(plot.title = element_text(hjust = 0.5)) 
```

    Como podemos ver no gráfico acima, não temos como identificar se há uma relação bem definida entre as variáveis em questão, já que os projetos estão bem concentrados em uma faixa de valores. 
    Na verdade, temos indícios de que a relação entre as variáveis é muito fraca, mas podemos adiar essa conclusão. 
    
    
    
    
    Antes, veremos se a análise é facilitada se usarmos faixas de valores para visualizar os dados. Além de usar a estratégia de dividir por faixas de valores, vamos filtrar os projetos que têm times com menos de 50 pesoas. Faremos isso para facilitar a visualização porque a maior parte dos projetos concentra-se nessa faixa de valores. 
    Essa estratégia é aplicada no gráfico abaixo. Chegamos, portanto à seguinte configuração: 

```{r}
# projetos %>%
#     filter(team < 50) %>%
#     ggplot(aes(cut(team, breaks = 4) , y = commits_per_month)) +
#     geom_boxplot()  +
#     geom_jitter(alpha = .1, size = 2, color = "darkcyan") +
#     ggtitle("Correlação entre o nº de commits/mês e o nº de pessoas no projeto") +
#     xlab("Quantidade de pessoas no projeto") +
#     ylab("Número de commits por mês") +
#     theme(plot.title = element_text(hjust = 0.5), legend.position="none")
#     
```

    Como podemos ver, o gráfico acima ainda não é o ideal para verificarmos como os dados comportam-se. Para facilitar ainda mais a visualização, vamos acrescentar uma escala logarítimica ao eixo y.
    Fazendo isso, chegamos ao gráfico abaixo:
    
```{r}
# projetos %>%
#     filter(team <= 50) %>%
#     ggplot(aes(cut(team, breaks = 4) , y = commits_per_month)) +
#     geom_boxplot() +
#     geom_jitter(alpha = .1, size = 2, color = "darkcyan") +
#     scale_y_log10()+
#     ggtitle("Correlação entre o nº de commits/mês e nº de pessoas no projeto") +
#     xlab("Quantidade de pessoas no projeto") +
#     ylab("Número de commits por mês (log10)") +
#     theme(plot.title = element_text(hjust = 0.5), legend.position="none")
#     
```

    Acima vemos com mais clareza que os dados não têm uma relação forte, pois os projetos estão concentrado em pontos específicos.
    
    
    
    

## Separar por time, será que funciona?
```{r}
projetos %>%
    filter(team <= 45) %>%
    ggplot(aes(cut(team, breaks = 4) , y = commits_per_month)) +
    geom_boxplot() +
    geom_jitter(alpha = .1, width = .4, size = 4, color = "darkcyan") +
    facet_grid(. ~ lang)
    
```

## E se não tiver nenhuma relação com o tamanho do time, mas sim com o tamanho do projeto?
    Vamos ver isso agora:


```{r}
projetos %>%
    ggplot(aes(x = sloc_end, y = commits_per_month)) +
    geom_point() +
    geom_jitter(alpha = .4, width = .4, size = 4, color = "darkcyan") 
```


## Projetos que levaram mais tempo de implementação são necessariamente maiores?


```{r}

projetos  %>%
    ggplot(aes(x = activity_period, y = sloc_end, color = lang)) +
    geom_point() +
    geom_jitter(alpha = .4, size = 2) 
```


```{r}

projetos  %>%
     ggplot(aes(x = activity_period, y = sloc_end, color = lang)) +
    geom_point() +
    geom_jitter(alpha = .4, size = 2) +
    scale_y_log10() +
    ggtitle("UMA LEGENDA AQUI") +
    xlab("Período de atividade") +
    ylab("Número de linhas de código") +
    theme(plot.title = element_text(hjust = 0.5))
    
```


```{r}

projetos  %>%
    ggplot(aes(x = activity_period, y = sloc_end, color = lang)) +
    geom_point() +
    geom_jitter(alpha = .4, size = 4) +
    scale_y_log10() +
    facet_grid(. ~ lang) +
    ggtitle("UMA LEGENDA AQUI") +
    xlab("Período de atividade") +
    ylab("Número de linhas de código") +
    theme(plot.title = element_text(hjust = 0.5), legend.position="none")
    

```


